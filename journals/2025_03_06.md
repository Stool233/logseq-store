- [[Robotics]] [[机器人]]
	- 一个思维模型
		- 感知（Perception）
			- 关注传感器开发、计算机视觉和AI驱动的场景理解，用于提升机器人的环境感知能力。
		- 自主性与决策制定（Autonomy & Decision Making）
			- 及机器学习、强化学习、伦理和进化算法，用于自主决策和自我提升。
		- 运动规划与控制（Motion Planning & Control）
			- 包括轨迹优化算法、运动学、动力学和机器人运动的实时控制。
		- 人机交互（Human-Robot Interaction, HRI）
			- 专注于直观通信、手势识别、协作机器人技术和社交互动。
		- 软体机器人与机器人硬件设计（Soft Robotics & Robotic Hardware Design）
			- 发展灵活、适应性强且受生物启发的机器人系统，以提高敏捷性和稳健性。
-
	- 规划一个机器人项目
	  collapsed:: true
		- 演示愿景
			- “机器人完成时应该实现什么目标？”
			- 苹果公司联合创始人史蒂夫·沃兹尼亚克提出的“咖啡测试”就是这样一个愿景，如今常被称为“新图灵测试”。他的定义是：
				- 一台机器需要进入一个普通的美国家庭，弄清楚如何制作咖啡：找到咖啡机，找到咖啡，加水，找到一个杯子，然后按对按钮来冲泡咖啡。
			- 实际上，在我所见过的大多数项目中，随着截止日期的临近，愿景往往会变得模糊不清或被缩减规模，因为物质或人力资源成为限制因素。
				- 然而，通过上述测试的演示可能会很好地作为通用人工智能（AGI）的基准。
					- 作为该测试的一部分，一个有实体的机器必须通过进入一个随机的家庭，并成功地使用之前未见过的厨房里的工具制作一杯咖啡来展示其智能。
		- 规划：目标、可演示成果以及目标应用或目标环境。
			- 在目标环境中进行良好演示的要求可能非常高！
		- 把事情分解。
			- 将可交付成果转化为功能需求。
			- 对于每个功能需求，需要识别一个或多个显示成功实现的特性。
			- 在分解时，特征通常至少被分成两个子集：
				- 关键：那些必须出现在最终产品中的元素。
					- 如果没有，项目就被认为是失败的。
						- 一个例子是一个重50公斤的类人机器人，部署在仓库自动化中，每个手臂需要携带10公斤的有效载荷。如果总重量为68公斤时，移动手臂的电动马达太弱，或者脚踝突然过热，那么客户将不会对产品或服务（RaaS，或机器人即服务，现在是一种服务）感到满意。
					- 因此，这个特性可能需要从[[V-model]]的最左边一直到最左边的健壮工程。
					- 识别这种相互依赖关系并根据工程直觉进行工程设计，是具有挑战性的，也是造就优秀技术领导者的部分原因。
				- 可选特性：最终项目可以不具备的特性
					- 例如为了实现更流畅、更平稳的动作而采用更高的控制频率。
					- 请注意，这些特性不能完全被忽略，但可以被视为软性约束，与那些往往是硬性约束的关键特性形成对比。即使动作不够流畅，但能完成任务的机器人仍可算作成功，并且还有改进的空间。
		- 关键阈值与可有可无的阈值会随时间而变化。
			- 硬性限制（“关键”）与软性限制（“可有可无”）通常相关联，其区别在于数量和质量的任意衡量标准。
			- 在机器人项目中，明确“最低需求”（关键需求）和“锦上添花需求”的阈值是良好的实践。
			- 随着项目的推进，这些需求可能会发生变化，原本的锦上添花需求可能会变成关键需求。
			- 只要项目中的每个人都得到通知并接受这些变化，那么项目就应该能够顺利推进，不会出现阻碍。
-
	- 开发阶段
	  collapsed:: true
		- 在开发过程中，机器人工程师需要在概念验证实验与项目扩展（包括配套基础设施）之间取得平衡。
			- 例如，一个概念验证实验可能是验证平行夹爪（机器人的手）在特定设置下能否抓取一个马克杯。
		- **扩展**可能会很困难，因为现实世界中有许多问题需要解决。将上述端着马克杯的例子进行扩展可以理解为：
			- 在各种设置中工作：
				- 机器人在目标部署环境中抓取遇到的任何杯子
			- 跨实体问题：
				- 抓取马克杯，但针对夹爪尺寸、负载、抓取力、吸盘压力等采用不同的夹爪配置。
			- 扩大范围
				- 抓取马克杯、盘子、叉子、刀子、勺子、杯子、碗、圆形（旋转式）门把手和长方形（可倾斜式）门把手。
			- 进一步扩大范围。
				- 抓取像枕头、购物袋或牙膏这类柔软、易变形的物体。
		- **一个稳固的自动化测试流水线是一项常常被忽视的巨大助力。**
			- 我见过一些项目在模拟器和实际硬件的健全自动化测试方面投入不足，但测试流水线往往需要随着新功能的增加而扩展。
			- 例如，如果在系统中添加了一个新的传感器，那么测试和/或部署栈也需要将新的传感器集成进去。
		- **在机器人技术领域，演示时通常需要准备“备选方案 B”。**
			- 您需要为最终演示构建灵活性，而在机器人技术中，部署失败的情况很常见。这意味着计划必须留出缓冲时间，并为“备选方案 B”的演示做好准备，以防“方案 A”失败。此外，一定要准备一个“备选方案 C”，即一段预先录制好的演示视频，随时准备在大屏幕上播放。如果演示失败，这会非常有用——这种情况发生的频率比我们愿意承认的要高！
		- **你需要在最终演示中构建冗余。**
			- 这是我在机器人领域学到的最重要的一课。
			- 结构化冗余可以被认为是对时不时发生的复杂、有时不可预测的混乱行为的补救。
				- 结构化冗余的一个例子可能是拥有一个备用机器人。
				- 另一个例子是具有多层安全限制
					- 对关节位置加以限制，使其不依赖于关节的物理或结构极限。
					- 对扭矩施加限制，以确保执行器的峰值扭矩额定值不被超出。
		- #### Control strategies  控制策略
			- 策略 1：基于模型的控制：
				- 传统的“黄金标准”采用精确的物理模型来确保稳定性，并对机器人如何移动以及如何与环境互动进行数学描述。
				- 该模型使用了这些组件：
					- 动态模型：考虑组件的质量和惯性、关节扭矩和力、重力影响、摩擦力以及作用于机器人的外部力
					- 运动学模型：考虑机器人关节之间的几何关系、关节运动的转换、环境限制和约束条件、速度以及加速度之间的关系。
					- 控制系统：预测机器人未来的状态，计算所需的关节扭矩/力，补偿干扰，优化运动轨迹，并实现精确的定位和移动。
				- 基于模型的控制器一直以来为从阿波罗任务到太空探索技术公司（SpaceX）用“筷子”捕获返回地球的星舰助推器，再到波士顿动力公司（Boston Dynamics）的杂技机器人等各种事物提供动力。
				  collapsed:: true
					- {{video https://youtu.be/NfrLoG2CeNU?si=AFxXl0fhcJKv6CZN}}
				- 总的来说，这种控制策略的优势在于其可靠性，即从明确表达的系统动态中得出明确的安全性和稳定性保证。其不足之处在于无法推广应用于非线性、不可预测的环境。
			- 策略 2：学习型控制器。
				- 该策略依靠神经网络从模拟或真实世界的数据中学习物理知识。
					- 这种方法对于需要泛化能力的任务而言十分理想，在这些任务中构建精确模型既不实际也不可行。
				- 这些控制器通常通过机器学习并利用以下三种数据源之一进行训练：
					- 与环境的交互：
						- 在物理精确的模拟器或世界模型中，通过强化学习或监督训练来学习，通过反复试验和错误进行迭代进化
					- 人类对如何执行某项任务的模仿或演示。
						- 该模型是通过传感器捕捉人类反复进行演示的过程来训练的。
					- 视频或动作捕捉：
						- 将模仿或演示的视频提供给模型用于训练
				- 总的来说，这种方法的主要优点在于其能够推广应用于高维、不确定的环境。然而，它缺乏可解释性（即人类理解、解释和预测控制系统行为的难易程度），并且在某些条件下无法保证性能和稳定性。
		- #### Simulation vs hardware  仿真与硬件
			- “从模拟到现实的差距”是一个挑战，尤其是对于基于模型的控制器的策略 1 来说。
				- 这个短语指的是将模拟中学习到的行为转移到实体机器人上。
			- 模拟器通常会简化或忽略现实世界中的细微差别，比如：
				- 传感器噪声和漂移：传感器测量中出现的非预期变化或干扰，这些变化或干扰并不能反映所测对象的实际变化。这在机器人技术领域仍是一个重大挑战，会影响机器人对其周围环境感知的准确性和可靠性。
				- 硬件延迟：例如电机的加速/减速时间、传感器处理延迟（如模数转换所需时间）、网络延迟以及类似的延迟。这些都会导致部署时出现偏差。
				- 摩擦损耗：例如，在高度动态的运动中由于空气阻力造成的损耗
				- 其他细微差别：电流的发热效应、功率限制以及执行器动态特性的变化
			- 现实世界中的机器人测试成本高昂、风险大且耗时长，这意味着模拟在开发过程中至关重要。弥合“模拟到现实的差距”存在诸多挑战：
				- 物理精度。模拟器常常在根本层面上简化或改变物理规律的运作方式，导致在现实世界中的部署难以预测。有时，虚拟世界中可行的操作会受到模拟器物理引擎的限制。
				- “Sim2sim”代表“模拟器到模拟器”。从模拟器成功过渡到现实世界通常依赖于 sim2sim 测试。这意味着要在不同的模拟器中验证行为，以减少差异。不过，仅使用模拟器时，物理精度的问题依然存在。
				- 硬件不确定性：没有两件硬件是完全相同的。执行器、结构屈服强度、散热器与机器人上众多需要冷却的芯片之间的导热膏覆盖面积以及硬件的其他各种物理参数都可能存在差异。这种差异会因测试和使用而加剧，例如某些部件使用得比其他部件多，可能会导致轻微的偏差。
			- 模拟是一种加快迭代速度的工具，而非绕过真实世界测试的捷径。考虑到模拟必然存在缺陷，明智的做法是按照一定的节奏持续验证新的改进措施，以实现预期的真实世界性能。
		- #### Making simulators more realistic 让模拟器更逼真
			- 领域随机化技术。
				- 诸如表面摩擦力或电机增益等关键参数可以在一定程度上进行随机化处理。
					- 这是为了应对现实世界中的机器人与模拟机器人在动力学表现上的细微差异，从而确保训练数据的分布涵盖测试数据的分布。
				- 例如，为一只机器狗训练一种学习型控制器策略，使其适应 10 种不同地形，而每种地形都使用相同的摩擦系数，这很可能会导致控制器过度拟合到该摩擦值。然而，在现实世界中，每种地形的实际摩擦系数都不同，甚至在同一种地形上，摩擦系数也会因接触面积、温度等因素而有所变化。
				- 在部署时，可以预期机器人在摩擦特性相似的地形上的表现与训练时的表现类似。然而，机器人在摩擦系数不同的地形上的表现可能会下降。情况可能会糟糕到导致灾难性故障。
			- 定期注入外部干扰，比如移动四足（四条腿）或人形机器人的基座或躯干。
				- 这可以通过侧向推力来实现——例如，模拟强风对石油钻井平台的冲击，或者机器人在行走时与动态变化的环境（比如被推移的沙发）发生意外碰撞。
			- 对物理硬件进行微调以消除模拟器与硬件之间的不匹配。
				- 以机器人的执行器在跟踪参考指令时表现不佳为例；即在发出这些指令时，机器人的运动与预期不符。在这种情况下，将控制器调整得更积极以跟踪参考指令（尽管整体稳定性可能降低），然后可能添加前馈扭矩，可以使机器人表现得更接近其数字孪生体。
			- 当控制器能够在现实世界中处理其在模拟环境中设计和训练所针对的环境时，可认为从模拟到现实的迁移是成功的。
			- 不过，现实世界相当复杂。在机器人开发过程中，硬编码变量、为安全起见的额外计算以及代码中的最小化抽象都是常见的现象。
				- 为什么会这么复杂？因为在前沿的研发中，很多想法都会走入死胡同，首先需要证明一个概念的可行性。
				- 只有在完成这一步之后，才能投入精力清理代码，并建立清晰的架构和抽象，尽管清晰性和可观测性仍然非常重要，以便在部署前让其他人检查代码中可能存在的错误，避免在测试时损坏机器人或其环境。
		-
			-
-
	- 技术栈和工具
	  collapsed:: true
		- 机器人技术领域的代码大多用 Python、C 和 C++ 编写，而且越来越多地使用 Rust 语言。不过，需要注意的是，从技术栈的角度来看，机器人技术很难一概而论，因为人们使用了大量不同的编程语言、模拟器和通信协议。
		- 能够实现快速迭代开发周期的工具包括：
			- **用于实验跟踪的机器学习/人工智能工具：**
				- **[WandB](https://docs.wandb.ai/tutorials/)**。一个机器学习和实验框架。用于追踪实验、可视化结果、调整超参数以及追踪模型和数据集。
				- **[Neptune](https://neptune.ai/)**:海王星：专为基础模型训练打造的实验追踪器
				- **[Tensorboard](https://www.tensorflow.org/tensorboard)** 与 Wandb 和 Neptune 类似。它是一款较老的产品，且并非基于云端。
				- 这三种工具都有助于在多次迭代中追踪参数、结果和训练指标。
					- 它们有助于确保可重复性，并能迅速突出趋势或问题。
					- 在强化学习或基于神经网络的控制器的研究中，快速获得实验反馈至关重要。
					- 在这些环境中，细微的变化可能会显著影响结果。
					- 请注意，所有这些机器学习/人工智能工具都是通用的，并非专门针对机器人技术。
				- 一些更新的工具：
					- Cursor。这款新兴的集成开发环境（IDE）在机器人领域越来越受欢迎。
					- AgileRL 是一个深度强化学习库，让强化学习变得更简单。它使团队能够系统地记录、可视化和分析实验。
			- **仿真平台**：
				- PyBullet：一款由 Bullet 物理引擎驱动的轻量级开源模拟器。非常适合快速原型设计以及测试机器人运动、操作和强化学习任务。
				- MuJoCo：代表“多关节动力学与接触”，为机器人应用场景提供通用物理引擎。
				- 英伟达 Isaac Sim：由人工智能芯片制造商打造，旨在实现高效性、可扩展性和真实世界物理精度，借助英伟达 PhysX 系统软件。Isaac Sim 支持一种简便的方式来大规模并行化训练环境。
				- 根据我在腿式机器人部署以及接触密集型操作任务方面的经验，在上述任何一款模拟器中训练的强化学习策略，如果还在一个或多个其他模拟器中取得成功，那么其表现出的动态特性与真实世界中的机器人足够相似的可能性就更高。
		-
			-
-
	- 测试、演示和交付
		- 机器人是人们能够通过软件操控的最复杂的系统之一。在实验室中运行良好的代码在现实世界的多变环境中往往会出现故障，而代码部署后出现故障的原因包括：
			- 控制系统实现过程中的各种bug（通常是常见的问题）
			- Delays 延迟
			- Cache overflows 缓存溢出
			- Friction 摩擦
			- Kernel errors 内核错误
			- Runtime failures 运行时失败
			- Drivers malfunctioning 驱动器故障
			- Overheating modules 过热的模块
			- Many other software, networking, hardware abstraction layer (HAL), and hardware quirks.还有许多其他软件、网络、硬件抽象层（HAL）以及硬件特性。
		- 测试包括:
			- Incrementally validating software against hardware at *every* stage 在每个阶段逐步对软件与硬件进行验证
			- Stress-testing for edge cases, especially in uncontrolled environments 针对极端情况的压力测试，尤其是在不受控制的环境中
		- 反馈周期可能很短，有时也可能很长。
			- 在对代码做出修改之后，可能只需几秒钟就能得到反馈——比如在对真实硬件进行微调时。
			- 然而，在某些情况下，反馈可能需要数小时：
				- 比如在等待其他人先审查更改时，或者有人正在使用你部署所需的硬件——这时你就得等待。
		- 测试很艰难，但演示才是真正的“怪兽”。
			- 在机器人领域，“能坏的东西总会坏”这句话感觉就是一条普遍真理！一定要准备一台随时能演示的备用机器人，而且别害怕中途改变策略。
		- #### “Shipping”在机器人技术中的含义
			- 交付工作不只是交付代码；还要确保机器人或机器人集群能够开箱即用，实现预期功能。这意味着软件必须：
				-