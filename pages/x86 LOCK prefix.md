- Cache coherence protocol and atomicity（缓存一致性协议和原子性）
	- Cache coherence protocol can guarantee atomicity of a single cache line operation like `ADD`（缓存一致性协议可以保证像ADD这样的单个缓存行操作的原子性）
		- imaging an implementation as follows:
			- Before executing the `ADD`, the cache will broadcast INVALIDATE on the bus (supposed its state was `shared` before).
			- On this bus, only one message can be broadcast each time.
			- So other processors’ copies will be Inv.
			- If another process broadcast another INV message immediately after that, the `XADD` instruction won’t respond until it finishes.
				- Suppose `A` and `B` are trying to do `ADD` at the same time:
				- Somehow `A` sends out the INV message first, so the cache line states are
					- `A`: shared → modified
					- `B`: shared → invalidated
				- Now `B` gets the bus and sends out its READX message, which requires a copy of the modified value and also invalidate all others.
				- When `A` gets the message, `ADD` won’t be interrupted. It only returns the updated value and invalidates itself once `ADD` is done.
				-
		-
	-