- 与[[TLA+]]有点相关
	- 都比较重视**逻辑基础**
-
- [[基于属性的测试]](PBT)背后的思想
	- 首先，您要找出代码的高级属性，然后编写一个生成器来检查数百个输入的属性。
- [[基于属性的测试]]是一个强大的工具，一些**逻辑基础**使它真正发光。
-
- 如果我们总能找到每个函数的完整规格，那将是完美的。可惜的是，大多数函数都太复杂了。
- 因此，我们能做的最好的事情就是找到部分规格（Partial Specifications），即一些函数属性的列表。
	- 如果一个函数通过了基于部分规格的测试，它可能是正确的，也可能不是正确的，
	- 但如果它没有通过测试，那它肯定是不正确的。
- 有效使用属性测试的关键之一是设计出既可行又能排除不正确代码的良好属性。
-
- 一种常见的属性测试（PBT）属性是某种“不变性”（invariance）：
	- 如果我们改变输入，答案不会改变。
		- 以排序为例，我们知道排序对混洗是不变的。
		- 如果我们将列表混洗，它仍然会以相同的方式排序。
- “幂等性”是另一种常见的属性（Idempotence）：
	- 对列表进行两次排序不会给我们不同的答案。
- 最著名的属性之一是“往返（round-trip）”属性。
	- 它定义在两个函数上，并且表示一个函数可以撤销另一个函数的操作。
	- 直观地说：
		- ```
		  Roundtrip(f(x), g(x)) =
		    all x in domain(f): g(f(x)) = x
		  ```
		- 考虑函数 `from_json` 和 `to_json`。如果你有一个 JSON 文件 `j`，那么你会期望 `from_json(to_json(j)) = j`。
		- 这成为一种有用的属性测试：
			- 找出任意 JSON 的策略，调用这两个函数，并查看是否得到相同的结果。
			- 注意，反向的往返可能不成立，因为 `to_json` 可能会进行规范化处理。
- 即使你想不出你的函数的任何属性，你仍然可以测试它在任何输入下都不会崩溃
- 最后一种有用的策略类别是“变形属性（metamorphic properties）”。
	- 这些属性将多个函数调用联系在一起。
		- 例如，如果你的计算机视觉系统识别出一个物体，那么当你将图片倾斜两度时，它应该仍然能识别出同一个物体。
		- 或者，如果你有一个带有过滤器的查询 API，添加一个新的过滤条件应该会给你一个没有该条件时结果的子集。
-
- 1. 规格（Specifications）可以确定哪些是有效的输入，以及它们与输出的关系。
- 2. 测试最终是检查一个函数是否符合其规格。
	- 单元测试通过检查一个单一输入来实现这一点。
	- 属性测试则生成大量随机输入并检查它们是否都满足这些属性。
- 3. 你可能无法为你的函数获得完整的规格，但你仍然可以有效地使用部分规格。
- 4. 并非所有属性都是函数局部的。有些属性跨越多个函数或输入。
-
- 尽管属性测试（PBT）非常有用，但函数具有规格的理念更进一步。通过它，我们可以扩展使用规格来验证更大代码集的正确性的想法。